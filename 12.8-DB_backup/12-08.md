# Домашнее задание к занятию 12.8. «Резервное копирование баз данных» -Денис Тихонов

---

### Задание 1. Резервное копирование

### Кейс
Финансовая компания решила увеличить надёжность работы баз данных и их резервного копирования. 

Необходимо описать, какие варианты резервного копирования подходят в случаях: 

1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день.

`Для даного условия подойдет еженедельное полное резервное копирование и хранение копий не на сервере, а в конце каждого дня выполнять дифференциальное копирование, которое будет включать данные не только полного бэкапа, но и данные на момент выполнения диф. копирования.`

1.2. Необходимо восстанавливать данные за час до предполагаемой поломки.

`Помимо ежедневных полных копий необходимо ежечасно, а лучше чаще, выполнять инкрементное копирование, которое будет учитывать только изменения прошедшие от полного бэкапа, а каждое следующее инкрементное - от предыдущего.`

1.3.* Возможен ли кейс, когда при поломке базы происходило моментальное переключение на работающую или починенную базу данных.

`Для данного условия потребуется использовать репликацию master-slave: в случае недоступности master, один из slave'ов  займет его место, а бывший master  когда/если будет восстановлен, станет slave'ом.`
*Приведите ответ в свободной форме.*

---

### Задание 2. PostgreSQL

2.1. С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).

```
pg_dump -Fc databasename > databasename.sql
```
`С помощью этой команды будет создан дамп базы данных databasename в файл databasename, где ключ  "-Fс" указывает кастомный формат бэкапа БД.`

```
pg_restore –d databasename databasename.sql
```
`"-d" указывает на имя бд, куда восстанавлявается дамп`

---

### Задание 3. MySQL

3.1. С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySQL. 


```
mysqldump --single-transaction --incremental-base=history:last_full_backup --databases your_database_name > incremental_backup.sql
```









3.1.* В каких случаях использование реплики будет давать преимущество по сравнению с обычным резервным копированием?

*Приведите ответ в свободной форме.*

---

Задания, помеченные звёздочкой, — дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.
